// Copyright 2025 Â© Arsenii Motorin
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import { StyleMetrics } from "std-widgets.slint";

import "assets/fonts/Gilroy-Medium.ttf";
import "assets/fonts/Gilroy-Bold.ttf";

export component Scene inherits Window {
    in-out property <string> nickname-text: "";
    in-out property <bool>   nickname-valid: true;
    in-out property <string> nickname-error: "";

    callback nickname-entered(text: string);
    callback validate-nickname(text: string) -> string;
    callback nickname-changed(text: string);

    width: 1040px;
    full-screen: false;
    // resizable: false;
    height: 590px;
    background: #141414;
    default-font-family: "Gilroy";
    default-font-weight: 500; // 500 - Medium, 700 - Bold
    default-font-size: 18px;
    title: "Dream Launcher";

    logo:=Rectangle {
        x: 441px;
        y: 45px;
        width: 158px;
        height: 99px;
            Image {
                source: @image-url("./assets/images/logo.png");
                width: parent.width;
                height: parent.height;
                image-fit: cover;
            }
    }

nickname_box := Rectangle {
    x: 370px; y: 489px;
    width: 300px; height: 56px;
    background: #1f1f1f;
    border-radius: 6px;
    border-width: root.nickname-valid ? 0px : 2px;
    border-color: #C63434;

    nickname_input := TextInput {
        x: 20px; y: 0px;
        width: parent.width - 60px;
        height: parent.height;
        text: root.nickname-text;
        color: root.nickname-valid ? #6E6E6E : #C63434;
        font-family: "Gilroy";
        font-size: 18px;
        vertical-alignment: center;

            edited => {

                root.nickname-text = self.text;
                root.validate-nickname(self.text);
                root.nickname-changed(self.text);
            }
            accepted => {
                root.nickname-entered(self.text);
            }
        }

    placeholder := Text {
        x: 20px;
        y: 0px;
        width: parent.width - 100px;
        height: parent.height;
        text: "Enter your nickname";
        color: #575757;
        font-family: "Gilroy";
        font-size: 18px;
        vertical-alignment: center;
        visible: root.nickname-text == "";
    }

    error_text := Text {
        x: 0px;
        y: parent.height + 5px;
        width: parent.width;
        height: 15px;
        text: root.nickname-error;
        color: #C63434;
        font-family: "Gilroy";
        font-size: 12px;
        visible: !root.nickname-valid && root.nickname-text != "";
    }
}

    enter_nickname := Rectangle {
        x: 640px;
        y: 508px;
        width: 10px;
        height: 18px;
                    Image {
                        source: @image-url("./assets/images/enter.png");
                        width: parent.width;
                        height: parent.height;
                        image-fit: cover;
                    }
    }
}